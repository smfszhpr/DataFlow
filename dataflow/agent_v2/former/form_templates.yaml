# 表单模板配置文件
# 支持多种类型的表单，根据用户需求自动选择合适的表单

templates:
  # 创建算子表单
  usual_code:
    name: "最基础的写代码"
    description: "最简单的代码生成工作流，代码只支持在终端输入字符来运行"

    xml_schema:
      required_fields:
        - user_requirements  # 用户需求描述
      optional_fields:
        - example_input      # 输入示例
        - example_output     # 输出示例
  # 创建算子表单
  create_operator:
    name: "创建算子"
    description: "根据用户需求创建新的数据处理算子"

    xml_schema:
      required_fields:
        - user_requirements  # 用户需求描述
        - dataset       # 数据集路径
        - output_format      # 输出格式
      optional_fields:
        - example_input      # 输入示例
        - example_output     # 输出示例
    
  # 优化算子表单  
  optimize_operator:
    name: "优化算子"
    description: "对现有算子进行性能优化或功能增强"
    xml_schema:
      required_fields:
        - user_requirements  # 优化需求
        - dataset       # 数据集
        - existing_code      # 现有代码
        - optimization_goal  # 优化目标
      optional_fields:
        - example_input      # 输入示例
        - example_output     # 输出示例

  # 推荐pipeline表单
  recommend_pipeline:
    name: "推荐Pipeline"
    description: "根据数据治理需求推荐合适的pipeline组合"
    xml_schema:
      required_fields:
        - user_requirements  # 数据治理需求
        - dataset_path      # 数据集路径
        - target_goal       # 治理目标
      optional_fields:
        - data_quality_issues # 数据质量问题
        - processing_constraints # 处理约束
        - performance_requirements # 性能要求

  # 知识库构建表单
  knowledge_base:
    name: "知识库构建"
    description: "构建知识库数据清洗与入库pipeline"
    xml_schema:
      required_fields:
        - user_requirements  # 用户需求
        - document_types    # 文档类型
        - target_database   # 目标数据库
      optional_fields:
        - cleaning_rules    # 清洗规则
        - chunking_strategy # 分块策略
        - embedding_model   # 向量化模型

# 默认配置
default_config:
  execution:
    timeout: 3600
    max_debug_round: 3
    stream_output: true
    use_local_model: false
  
  api:
    model: "deepseek-v3"
    backend_url: "http://localhost:7862/api"
    
  pipeline:
    execute_the_pipeline: true
    execute_the_operator: true
    language: "zh"

# 表单选择规则
selection_rules:
  # 基于关键词匹配
  keyword_matching:
    threshold: 0.6
    
  # 基于意图分类
  intent_classification:
    enabled: true
    fallback_to_recommend: true  # 如果无法确定意图，默认使用推荐pipeline
